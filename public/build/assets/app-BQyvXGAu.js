document.addEventListener("DOMContentLoaded",()=>{const l="http://127.0.0.1:8000",e=document,t=e.querySelector("button#Auth"),s=e.querySelector("input#email"),o=200;let c=e.querySelector("title").innerHTML;t.addEventListener("click",function(){t.disabled=!0,t.innerHTML=`<img id="loading" src='${l+"/assets/images/loading.png"}' alt=''>`;let i=new XMLHttpRequest;i.onload=function(){if(t.disabled=!1,JSON.parse(i.response).status==="Success"){t.innerHTML="مرحله بعد",s.classList.remove("invalid");try{e.querySelector(".error-box").style.display="none"}catch{}}else{t.innerHTML="مرحله بعد";let r=JSON.parse(i.response).data.errors;s.classList.add("invalid");let a="";try{e.querySelector(".error-box").remove()}catch{}a+='<div class="error-box mt-1">',r.email.forEach(function(n){n==="email is required."?n="ایمیل اجباری است.":n==="email must be type email."&&(n="ورودی باید از نوع ایمیل باشد."),a+=`<span class="error text-[#FF5C00] mt-1 block">${n}</span>`}),a+="</div>",s.insertAdjacentHTML("afterend",a)}},i.open("POST",l+"/api/v1/auth"),i.setRequestHeader("Content-type","application/json"),setTimeout(()=>{i.send(JSON.stringify({email:s.value}))},o)}),e.addEventListener("visibilitychange",function(){e.visibilityState==="hidden"?e.title="کجا رفتی؟ بیا😒":e.title=c})});
